$.fn.productAutocomplete=function(t){"use strict";t=t||{};var e="undefined"!=typeof t.multiple?t.multiple:!0;this.select2({minimumInputLength:3,multiple:e,initSelection:function(t,u){$.get(Spree.routes.product_search,{ids:t.val().split(",")},function(t){u(e?t.products:t.products[0])})},ajax:{url:Spree.routes.product_search,datatype:"json",data:function(t){return{q:{name_cont:t,sku_cont:t},m:"OR",token:Spree.api_key}},results:function(t){var e=t.products?t.products:[];return{results:e}}},formatResult:function(t){return t.name},formatSelection:function(t){return t.name}})},$(document).ready(function(){$(".product_picker").productAutocomplete()});